# name: CI/CD Pipeline
 
# on:
#   push:
#     branches:
#       - main
#   pull_request:
#     branches:
#       - main

# jobs:
#   build:
#     runs-on: ubuntu-latest
 
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v2
 
#     - name: Set up JDK 17
#       uses: actions/setup-java@v3
#       with:
#         distribution: 'temurin'
#         java-version: '17'
 
#     - name: Build with Maven
#       run: mvn clean package
 
#     - name: Run Unit Tests
#       run: mvn test
 
#     - name: Run Functional Tests
#       run: mvn verify
 
#     - name: Login to Docker Hub
#       uses: docker/login-action@v1
#       with:
#         username: ${{ secrets.DOCKER_HUB_USERNAME }}
#         password: ${{ secrets.DOCKER_HUB_TOKEN }}
 
#     - name: Build Docker image
#       run: docker build -t ${{ secrets.DOCKER_HUB_USERNAME }}/java-api:latest .
 
#     - name: Push Docker image
#       run: docker push ${{ secrets.DOCKER_HUB_USERNAME }}/java-api:latest

#   tagging:
#     needs: build
#     runs-on: ubuntu-latest
#     steps:
#       - name: 游닌 Checkout del c칩digo
#         uses: actions/checkout@v4

#       - name: Configurar Git
#         run: |
#           git config --global user.email "github-actions@github.com"
#           git config --global user.name "github-actions"
      
#       - name: Autenticaci칩n con PAT
#         run: git remote set-url origin https://x-access-token:${{ secrets.GH_PAT }}@github.com/AJCARVAJL15/java-api.git
      
#       - name: Crear Git Tag
#         run: echo "TAG_NAME=v$(echo ${GITHUB_REF##*/}-$(date +%Y%m%d%H%M%S))" >> $GITHUB_ENV
      
#       - name: Push Git Tag
#         run: git tag $TAG_NAME && git push origin $TAG_NAME

name: Create Tag

on:
  push:
    branches:
      - main  # Este pipeline se ejecutar치 cuando haya un push en la rama principal

jobs:
  create_tag:
    runs-on: ubuntu-latest

    steps:
      # Paso 1: Obtener el c칩digo
      - name: Checkout code
        uses: actions/checkout@v2

      # Paso 2: Configurar Git
      - name: Set up Git
        run: |
          git config --global user.email "you@example.com"
          git config --global user.name "Your Name"

      # Paso 3: Crear el tag
      - name: Create tag
        run: |
          TAG_NAME="v1.0.${{ github.run_number }}"
          git tag $TAG_NAME
          git push origin $TAG_NAME
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
